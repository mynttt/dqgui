<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">

        <title>Remote Execution Server - DQGUI Documentation</title>
        <meta name="description" content="User and developer documentation">

        <link href="css/bootstrap-2.3.2-combined.no-icons.min.css" rel="stylesheet">
        <link rel="stylesheet" href="css/syntax.css">
        <link rel="stylesheet" href="css/main.css">
    </head>
    <body>
        <div class="container">
            <div class=row-fluid id=header>
                <div id=site-title class=span8>
                    <h4><a class=brand href="index.html">DQGUI Documentation</a>
    <small>User and developer documentation</small>
</h4>


                </div>
                <div id=search class=span4>
                </div>
            </div>

            <div class=row-fluid>
                <div id=navigation class=span2>
                    <ul class="nav nav-list">
  <li class="nav-header"><a href="javaDocs/index.html">DQGUI Javadoc</a></li>
    

    
      
      
      

        

          
            <li class="nav-header" style="font-size: 1em !important;">Documentation</li>
            
          

          
          
            <li><a href="building.html">Building DQGUI</a></li>
          
          

        

      

        

      

        

      

        

          

          
          
            <li><a href="dba.html">Database Abstraction Layer</a></li>
          
          

        

      

        

      

        

      

        

      

        

      

        

      

        

      

        

          

          
          
            <li class="active"><a href="remote-execution.html">Remote Execution Server</a></li>
          
          

        

      

    
      
      
      

        

      

        

      

        

      

        

      

        

      

        

          
            <li class="nav-header" style="font-size: 1em !important;">Tutorial</li>
            
          

          
          
            <li><a href="tut-mongo.html">Engine Tutorial: Mongo</a></li>
          
          

        

      

        

          

          
          
            <li><a href="tut-pg.html">Engine Tutorial: Postgres</a></li>
          
          

        

      

        

      

        

      

        

      

        

      

    
      
      
      

        

      

        

          
            <li class="nav-header" style="font-size: 1em !important;">Reference</li>
            
          

          
          
            <li><a href="editor.html">Code Editor</a></li>
          
          

        

      

        

      

        

      

        

          

          
          
            <li><a href="databases.html">Database Management</a></li>
          
          

        

      

        

      

        

      

        

          

          
          
            <li><a href="execution.html">Execution and Reports</a></li>
          
          

        

      

        

          

          
          
            <li><a href="other.html">Other Features</a></li>
          
          

        

      

        

          

          
          
            <li><a href="projects.html">Projects</a></li>
          
          

        

      

        

      

    
      
      
      

        

      

        

      

        

      

        

      

        

      

        

      

        

      

        

      

        

      

        

      

        

      

    
      
      
      

        

      

        

      

        

      

        

      

        

      

        

      

        

      

        

      

        

      

        

      

        

      

    
</ul>

                </div>

                <div id=content class=span10>
                                    <section id="search-results" style="display: none;">
                    <p>Search results</p>
                    <div class="entries"></div>
                </section>


                    <h1 class="page-header">Remote Execution Server
                        
                    </h1>

                    <ol>
  <li><a href="#configuration">Configuration</a></li>
  <li><a href="#internal-workings">Internal Workings</a></li>
  <li><a href="#endpoints">Endpoints</a></li>
</ol>


<hr></hr>

<h3 id="configuration">Configuration</h3>

<p>The remote execution server is configured by the <code class="highlighter-rouge">config.json</code> file. Upon starting the server the first time it will generate a default configuration, store it in PWD and shutdown with a message indicating that you should review the configuration file before starting it again.</p>

<p>Starting the server from now on will always load the configuration.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"enforceSSL"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"rServe"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">9999</span><span class="p">,</span><span class="w">
  </span><span class="nt">"executorPoolSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
  </span><span class="nt">"pruneUncollectedEveryHours"</span><span class="p">:</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w"> 
  </span><span class="nt">"keepJobsForDays"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
  </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f369bd256006c86616971f9b7caf14da487dd286bbec096f5d28e9731487f4dc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<ul>
  <li><span style="color: red"><code class="highlighter-rouge">enforceSSL</code></span>: Will redirect http traffic to https</li>
  <li><span style="color: red"><code class="highlighter-rouge">rServe</code></span>: Will connect to a rServe instance or throw an exception if a connection fails. The connection is done through the <code class="highlighter-rouge">de.mvise.iqm4hd.client.RConn</code> singleton.</li>
  <li><span style="color: red"><code class="highlighter-rouge">port</code></span>: Allows to specify the port of the server</li>
  <li><span style="color: red"><code class="highlighter-rouge">executorPoolSize</code></span>: How large should the IQM4HD worker pool be?</li>
  <li><span style="color: red"><code class="highlighter-rouge">pruneUncollectedEveryHours</code></span>: How often in hours should the prune housekeeping task run?</li>
  <li><span style="color: red"><code class="highlighter-rouge">keepJobsForDays</code></span>: How long should uncollected jobs be held by the server?</li>
  <li><span style="color: red"><code class="highlighter-rouge">key</code></span>: generated on config creation, is used to restrict access to the server</li>
</ul>

<p>A folder named jobs will also be created to store finished uncollected jobs so a server restart / crash wonâ€™t cause a data loss.</p>

<h3 id="internal-workings">Internal Workings</h3>

<p>Sending a job to the server will enqueue it with an executor service, upon completion, the job will be transferred from memory into the <code class="highlighter-rouge">jobs</code> folder.</p>

<p>Clients connected via the event websocket are notified about completion events and can then collect the job.</p>

<p>Collection will remove the job from the server and send transfer the results to the client, it is then the clients duty to propagate the results by either uploading it to the database or storing it in a filesystem project.</p>

<p>Every DQGUI project has a UUID assigned to it so the client will know what to do with the job.</p>

<p>The server must be able to connect to the targeted database. If a client connects to a database through an SSH tunnel, the remote server must also have that SSH tunnel open. It probably makes sense to host the server on the same machine as the database and then connect through an SSH tunnel to the server.</p>

<p>A good practice would be to use SSH tunnels to the database on the server and client side. As long as the port is the same the server will be able to connect through the tunnel.</p>

<p><strong>Please only connect to the remote execution server via an SSH tunnel or HTTPS as the database credentials will be sent via a JSON payload!</strong></p>

<h3 id="endpoints">Endpoints</h3>

<p>Every request needs to have the header <code class="highlighter-rouge">X-Key</code> set to the matching key.</p>

<p>These endpoints do not follow the standardized REST verbs and specifications.</p>

<p>Success is signaled by a 200 response, 401 signals an invalid key.</p>

<p>All endpoints will send a <a href="javaDocs/de/hshannover/dqgui/execution/model/remote/Remote.html">RemoteError</a> object with status code 500 if an error occurs.</p>

<table>
  <thead>
    <tr>
      <th>Type</th>
      <th style="text-align: center">Endpoint</th>
      <th style="text-align: center">Model In</th>
      <th style="text-align: center">Model Out</th>
      <th style="text-align: center">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">GET</code></td>
      <td style="text-align: center"><code class="highlighter-rouge">/execution</code></td>
      <td style="text-align: center">none</td>
      <td style="text-align: center"><a href="javaDocs/de/hshannover/dqgui/execution/model/remote/RemoteStatusReports.html">RemoteStatusReports</a></td>
      <td style="text-align: center">List all jobs</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">POST</code></td>
      <td style="text-align: center"><code class="highlighter-rouge">/execution</code></td>
      <td style="text-align: center"><a href="javaDocs/de/hshannover/dqgui/execution/model/remote/RemoteJob.html">RemoteJob</a></td>
      <td style="text-align: center"><a href="javaDocs/de/hshannover/dqgui/execution/model/remote/RemoteStatusReport.html">RemoteStatusReport</a></td>
      <td style="text-align: center">Submit a job</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">POST</code></td>
      <td style="text-align: center"><code class="highlighter-rouge">/execution/progress</code></td>
      <td style="text-align: center"><a href="javaDocs/de/hshannover/dqgui/execution/model/remote/RemoteProgressRequest.html">RemoteProgressRequest</a></td>
      <td style="text-align: center"><a href="javaDocs/de/hshannover/dqgui/execution/model/remote/RemoteProgressResponse.html">RemoteProgressResponse</a></td>
      <td style="text-align: center">Request log of running job</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">GET</code></td>
      <td style="text-align: center"><code class="highlighter-rouge">/execution/test</code></td>
      <td style="text-align: center">None</td>
      <td style="text-align: center">None</td>
      <td style="text-align: center">Useless test endpoint</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">POST</code></td>
      <td style="text-align: center"><code class="highlighter-rouge">/execution/collect</code></td>
      <td style="text-align: center"><a href="javaDocs/de/hshannover/dqgui/execution/model/remote/RemoteCollectionRequest.html">RemoteCollectionRequest</a></td>
      <td style="text-align: center"><a href="javaDocs/de/hshannover/dqgui/execution/model/remote/RemoteCollectionResponse.html">RemoteCollectionResponse</a></td>
      <td style="text-align: center">Collect finished job results</td>
    </tr>
  </tbody>
</table>

<p></p>

<p>An event websocket running at <code class="highlighter-rouge">/events</code> can be subscribed to if you want to receive completion events, the model for them is <a href="javaDocs/de/hshannover/dqgui/execution/model/remote/RemoteSocketNotification.html">RemoteSocketNotification</a>.</p>

                </div>
            </div>

            <div class=row-fluid>
                <div id=footer class=span12>
                    
                </div>
            </div>
        </div>
    </body>
</html>
