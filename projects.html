<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">

        <title>Projects - DQGUI Documentation</title>
        <meta name="description" content="User and developer documentation">

        <link href="css/bootstrap-2.3.2-combined.no-icons.min.css" rel="stylesheet">
        <link rel="stylesheet" href="css/syntax.css">
        <link rel="stylesheet" href="css/main.css">
    </head>
    <body>
        <div class="container">
            <div class=row-fluid id=header>
                <div id=site-title class=span8>
                    <h4><a class=brand href="index.html">DQGUI Documentation</a>
    <small>User and developer documentation</small>
</h4>


                </div>
                <div id=search class=span4>
                </div>
            </div>

            <div class=row-fluid>
                <div id=navigation class=span2>
                    <ul class="nav nav-list">
  <li class="nav-header"><a href="javaDocs/index.html">DQGUI Javadoc</a></li>
    

    
      
      
      

        

          
            <li class="nav-header" style="font-size: 1em !important;">Documentation</li>
            
          

          
          
            <li><a href="building.html">Building DQGUI</a></li>
          
          

        

      

        

      

        

      

        

          

          
          
            <li><a href="dba.html">Database Abstraction Layer</a></li>
          
          

        

      

        

      

        

      

        

      

        

      

        

      

        

      

        

          

          
          
            <li><a href="remote-execution.html">Remote Execution Server</a></li>
          
          

        

      

    
      
      
      

        

      

        

      

        

      

        

      

        

      

        

          
            <li class="nav-header" style="font-size: 1em !important;">Tutorial</li>
            
          

          
          
            <li><a href="tut-mongo.html">Engine Tutorial: Mongo</a></li>
          
          

        

      

        

          

          
          
            <li><a href="tut-pg.html">Engine Tutorial: Postgres</a></li>
          
          

        

      

        

      

        

      

        

      

        

      

    
      
      
      

        

      

        

          
            <li class="nav-header" style="font-size: 1em !important;">Reference</li>
            
          

          
          
            <li><a href="editor.html">Code Editor</a></li>
          
          

        

      

        

      

        

      

        

          

          
          
            <li><a href="databases.html">Database Management</a></li>
          
          

        

      

        

      

        

      

        

          

          
          
            <li><a href="execution.html">Execution and Reports</a></li>
          
          

        

      

        

          

          
          
            <li><a href="other.html">Other Features</a></li>
          
          

        

      

        

          

          
          
            <li class="active"><a href="projects.html">Projects</a></li>
          
          

        

      

        

      

    
      
      
      

        

      

        

      

        

      

        

      

        

      

        

      

        

      

        

      

        

      

        

      

        

      

    
      
      
      

        

      

        

      

        

      

        

      

        

      

        

      

        

      

        

      

        

      

        

      

        

      

    
</ul>

                </div>

                <div id=content class=span10>
                                    <section id="search-results" style="display: none;">
                    <p>Search results</p>
                    <div class="entries"></div>
                </section>


                    <h1 class="page-header">Projects
                        
                    </h1>

                    <ol>
  <li><a href="#file-system-projects">File System Projects</a></li>
  <li><a href="#database-projects">Database Projects</a>
    <ol>
      <li><a href="#multi-user-state-visibility-issues">Multi-user State Visibility Issues</a></li>
    </ol>
  </li>
  <li><a href="#management">Management</a></li>
</ol>


<hr></hr>

<p>Projects allow separation of components, environments and execution results.</p>

<p>There are currently two project implementations that are listed below.</p>

<h3 id="file-system-projects">File System Projects</h3>

<p>A project on the filesystem. Global checks are loaded through a globally defined directory.</p>

<p>The file structure of a file system project looks like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>.
├── actions
│   ├── ARIMACheck.iqm4hd
|   |...
├── checks
│   ├── ARCheck.iqm4hd
|   ...
├── environments.json
├── fs-extra.json
├── guid
├── results
│   ├── feedbacks
│   │   └── 1586811209086-NotNullCheckParkingPlate-default-worker-1-feedback.json
│   ├── finished-workers.json
│   ├── logs
│   │   └── 1586811209086-NotNullCheckParkingPlate-default-worker-1.log
│   └── reports
│       └── 1586811209086-NotNullCheckParkingPlate-default-worker-1-report.json
└── sources
    ├── ARParam.iqm4hd
    ...
</code></pre>
</div>

<h3 id="database-projects">Database Projects</h3>

<p>A project within a database.</p>

<p>In this context a database is referred to as a repository as it can hold multiple projects.</p>

<p>Global checks are accessible by all projects in the database while the other components are separated from each other.</p>

<h4 id="multi-user-state-visibility-issues">Multi-user State Visibility Issues</h4>

<p>Per specification it was decided that it rarely happens that multiple users would work on a project concurrently, together with the requirement to directly operate on the database it is thus not possible to notify other clients connected to the repository of state changes.</p>

<p>This introduces three problems that users of DQGUI should be aware of when working on one project concurrently:</p>

<p><strong>Database Environment updates are not propagated to other clients that have the same project loaded</strong>
  - Client A and B have the same initial database environments
  - Client A adds connection <code class="highlighter-rouge">test</code> to the default environment
  - The database entry is updated
  - Client B decides to also add a <code class="highlighter-rouge">test</code> connection to the default environment, but this connection uses a different server than the connection that client A added
  - Normally client B would get an error that <code class="highlighter-rouge">test</code> already exists within the environment
  - But because A and B work on the project concurrently, and thus started with the same state, the state changes that client A made were not propagated to client B
  - Client B thus operates on old data and overrides the environments, and thus client A’s version of <code class="highlighter-rouge">test</code> with their <code class="highlighter-rouge">test</code> connection</p>

<p><strong>Feedback updates are also not propagated to other clients that have the report opened</strong>
  - two users updating the same report’s feedback concurrently will overwrite each other without seeing the other users updates
  - reports and feedback are cached once loaded, closing and opening the <code class="highlighter-rouge">Reports</code> window will always guarantee a the newest feedback state</p>

<p><strong>Deleting a component can cause issues for users currently editing and then saving it</strong>
  - User A and B have the same project loaded
  - User A works on the <code class="highlighter-rouge">testCheck</code> check, has it loaded in a tab and is currently typing
  - User B deletes the <code class="highlighter-rouge">testCheck</code> check from the project
  - User A saves their work
  - An exception will be thrown now, as user A tries to save something that does not exist anymore</p>

<p><strong>Changes to reports are not propagated to other clients</strong>
  - Deleting a report will not inform the other clients about the deletion until they restart
  - A deleted report can still be accessed because all reports are cached
  - On application startup a removal of invalid reports is automatically initiated
  - Same goes for newly added reports, refreshing the repository helps without restarting the application</p>

<p>These issues are however not deemed as too important, as they would rarely occur.</p>

<p>Most database environment operations are write once, read many. It is likely that once a project is created, all environments and connections will be set-up by one user and that those will rarely change.</p>

<p>Feedback is most likely being evaluated after a report finishes by the user that launched the report.</p>

<p>The third scenario is unlikely as well, as it does not often happen that a check is deleted while someone else is working on it.</p>

<p>Every repository implementation is free to decide how the underlying database transactions are handled. The <code class="highlighter-rouge">JdbcRepository</code> has auto-commit turned off and calls a <strong>rollback</strong> on all <code class="highlighter-rouge">select</code> queries and a <strong>commit</strong> on all successful <code class="highlighter-rouge">insert</code> or <code class="highlighter-rouge">update</code> queries (failed onces are reverted with <strong>rollback</strong>). There are thus no locks kept open after dealing with a resource and all above mentioned problems can occur.</p>

<p>In case this should ever be fixed, a potential solution would be to create a repository server that uses an underlying SQLite database for the repository, clients can than connect to a websocket that notifies of any changes.</p>

<p>Change operations would be put in a queue that executes on operation at a time and guarantees that all clients would receive valid state updates.</p>

<h3 id="management">Management</h3>

<p>A project can be created by using the <code class="highlighter-rouge">Repository -&gt; Manage Projects</code> entry.
- adding a file system project will open up a directory chooser
- adding a database project will require a project name to be set
- multiple database projects can share the same name as the identifier is used as primary key</p>

<p><img src="projects.PNG" style="display: block;margin: 1em auto 1.2em auto;" width="500px" /></p>

<ul>
  <li>Once added a project can be deleted or selected via the context menu.</li>
  <li>Double clicking a project will also select it, only a selected project is loaded.</li>
  <li>To check if your project is loaded ensure that the top right label contains the project.</li>
  <li>Deleting a project can never delete the global checks.</li>
</ul>

<p>Filesystem projects can also be removed, that means it disappears from the list but continues to exist on the filesystem.</p>

                </div>
            </div>

            <div class=row-fluid>
                <div id=footer class=span12>
                    
                </div>
            </div>
        </div>
    </body>
</html>
